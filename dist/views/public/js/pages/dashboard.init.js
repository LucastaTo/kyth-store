let sortBy=document.getElementById("sortBy"),openModalSpinner=document.getElementById("openModal");function sortTypeSwitch(){let e=document.getElementById("sort");"ASC"===e.value?e.value="DESC":e.value="ASC"}let valid=document.getElementById("validSelect");valid&&valid.addEventListener("change",(function(){openModalSpinner.click(),currentPage&&(currentPage.value=1),document.getElementById("search-form").submit()}));let openModal=document.getElementsByClassName("open-modal");openModal.length>0&&openModal[0].click();let sortId=document.getElementById("sort-by-id");sortId&&sortId.addEventListener("click",(function(){"id"===sortBy.value&&sortTypeSwitch(),sortBy.value="id",document.getElementById("search-form").submit()}));let sortName=document.getElementById("sort-by-name");sortName&&sortName.addEventListener("click",(function(){"name"===sortBy.value&&sortTypeSwitch(),sortBy.value="name",document.getElementById("search-form").submit()}));let sortKatakanaName=document.getElementById("sort-by-katakanaName");sortKatakanaName&&sortKatakanaName.addEventListener("click",(function(){"katakanaName"===sortBy.value&&sortTypeSwitch(),sortBy.value="katakanaName",document.getElementById("search-form").submit()}));let sortCreatedAt=document.getElementById("sort-by-createdAt");sortCreatedAt&&sortCreatedAt.addEventListener("click",(function(){"createdAt"===sortBy.value&&sortTypeSwitch(),sortBy.value="createdAt",document.getElementById("search-form").submit()}));let wordRow,params,href=window.location.href,wordList=document.getElementById("wordList");function getHrefInput(e){let t=document.createElement("input");t.type="hidden",t.id="href",t.name="href";let n=document.location.search;if(1==JSON.parse(wordList.dataset.test).length&&e.action.indexOf("delete")>-1&&1!==Number(currentPage.value)){let e=new URLSearchParams(n.substring(n.indexOf("?"))).get("page");n=n.replace(e,e-1)}t.value=String(n),e.appendChild(t)}wordList&&JSON.parse(wordList.dataset.test).forEach((e=>{params=document.getElementById(`sa-params-${e}`),forms=document.getElementById("form-delete"),forms||(forms=document.createElement("form"),forms.id="form-delete",forms.style.display="none",document.getElementById(`delete-btn-${e}`).appendChild(forms)),wordRow=document.getElementsByClassName(`word-${e}`),params&&wordRow&&params.addEventListener("click",(function(){Swal.fire({title:"本当に削除しますか？",text:"元に戻すことはできません！",icon:"warning",showCancelButton:!0,confirmButtonText:"削除する",cancelButtonText:"キャンセル",confirmButtonClass:"btn btn-success mt-2",cancelButtonClass:"btn btn-danger ms-2 mt-2",buttonsStyling:!1,focusCancel:!0}).then((function(t){t.value&&(forms.method="POST",forms.action=`/word-list/${e}/delete`,getHrefInput(forms),forms.submit())}))})),document.getElementById("edit-modal").addEventListener("hidden.bs.modal",(function(){let e=document.getElementsByClassName("invalid-feedback"),t=document.getElementById("edit-name"),n=document.getElementById("editActivateCheckbox");document.getElementById("name").value="",t.value="",n.checked=!1,t.classList.remove("form-error"),e.length>0&&e[0].remove()}))}));let checkboxBtnCreate=document.getElementById("createActivateCheckbox");checkboxBtnCreate&&checkboxBtnCreate.addEventListener("click",(function(){checkboxBtnCreate.checked?checkboxBtnCreate.value="true":checkboxBtnCreate.value="false"}));let checkboxBtnEdit=document.getElementById("editActivateCheckbox");checkboxBtnEdit&&checkboxBtnEdit.addEventListener("click",(function(){checkboxBtnEdit.checked?checkboxBtnEdit.value="true":checkboxBtnEdit.value="false"}));let modal=document.getElementById("create-modal");modal.addEventListener("hidden.bs.modal",(function(){let e=document.getElementsByClassName("invalid-feedback"),t=document.getElementById("name"),n=document.getElementById("createActivateCheckbox");document.getElementById("name").value="",t.value="",n.checked=!0,t.classList.remove("form-error"),e.length>0&&e[0].remove()})),$(document).ready((function(){$("#btn-create-word").click((function(){$.ajax({url:"/word-list/",type:"POST",data:{name:$("#name").val(),description:$("#description").val(),isActive:$("#createActivateCheckbox").val(),url:window.location.href},json:!0,success:function(e){if(e.errors){$("#create-modal").modal("show");$("#name");$(".invalid-feedback")&&($(".invalid-feedback").remove(),$("#name").addClass("form-error"),$("#name").after(`<div class="invalid-feedback d-block">${e.errors.name}</div>`))}else{let t=e.url;window.location.href=t}}})})),document.getElementsByClassName("edit-ng").forEach((e=>{$("#"+e.id).click((function(){let t=e.id.split("-")[2];document.getElementById(`edit-ng-${t}`).classList.add("modal-openning");let n=document.getElementById("edit-name"),a=document.getElementById("edit-description"),d=document.getElementById("editActivateCheckbox");document.getElementById(`ngRegRow-${t}`).children.forEach((e=>{"name"===e.className&&(n.value=e.innerText),"description"===e.className&&(a.value=e.innerText),e.className.indexOf("active")>-1&&e.children[0].classList.contains("active-"+t)&&(d.checked=!0,d.value=!0)})),$("#edit-btn-submit").attr("data-id",t)}))})),$("#edit-btn-submit").click((function(){let e=$(this).attr("data-id");$.ajax({url:"/word-list/"+e+"/edit",type:"POST",data:{id:e,name:$("#edit-name").val(),description:$("#edit-description").val(),isActive:$("#editActivateCheckbox").val(),url:window.location.href},json:!0,success:function(e){if(e.errors)$(".invalid-feedback")&&($(".invalid-feedback").remove(),$("#edit-name").addClass("form-error"),$("#edit-name").after(`<div class="invalid-feedback d-block">${e.errors.name}</div>`));else{let t=e.url;window.location.href=t}}})}))}));